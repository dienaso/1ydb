requirejs.config({baseUrl:G.url+G.ver+"/js/",paths:{jquery:"http://mimg.127.net/p/tools/jquery/jquery-1.11.0.min",pro:"http://mimg.127.net/p/tools/pro/pro-1.3.5.min",jqureyui:"http://mimg.127.net/p/yy/lib/jqui/jquery-ui-1.10.4.custom.min",jqureyzh:"http://mimg.127.net/p/yy/lib/jqui/jquery.ui.datepicker-zh-CN"},shim:{jquery:{exports:"$"}}}),define("base",function(){}),define("component/base",["require","exports","module","pro"],function(e,t){var n=e("pro");n.Component={};var r=n.Component.Base=n.View.extend(function(e){e=e||{};var t=this.constructor;this.model.set({className:e.className,subclass:e.subclass,style:e.style,attr:e.attr,disabled:!!e.disabled}),"onclick"in e&&this.listen("click",e.onclick),this.listen("disable",function(){this.dom.setAttribute("disabled","disabled"),this.addClass(t.getClassName("disabled")),this.model.set("disabled",!0)}),this.listen("resume",function(){this.dom.removeAttribute("disabled"),this.removeClass(t.getClassName("disabled")),this.model.set("disabled",!1)}),this.listen("create",function(e){var t=this.model.get();t.className&&this.addClass(t.className),t.subclass&&this.addClass(this.constructor.getClassName(t.subclass));if(t.style){var n="";if(typeof t.style=="string")n=t.style;else for(var r in t.style)n+=r+":"+t.style[r]+";";e.style.cssText+=(/;$/.test(e.style.cssText)||!e.style.cssText?"":";")+n}if(t.attr)for(var r in t.attr)e.setAttribute(r,t.attr[r])}),this.listen("render",function(){this.model.get("disabled")&&this.disable()})},{_events:{"@":"click"},Model:n.Model,getClassName:function(e){var t=this._baseClassName;if(t){var n=e.split(" ");for(var r=0,i=n.length;r<i;r++)n[r]=t+"-"+n[r];return n.join(" ")}return""}});return r}),define("component/button",["require","pro","component/base"],function(e){var t=e("pro"),n=e("component/base"),r=t.Component.Button=n.extend(function(e){var t=this.constructor;this.__hoverClass=t.getClassName("hover"),this.model.set({_tag:e.href?"a":"button",text:e.text||"",href:e.href,target:e.target}),this.model.get("href")&&(this.listen("disable",function(){this.dom.removeAttribute("href"),this.dom.removeAttribute("target")}),this.listen("resume",function(){this.dom.href=this.model.get("href"),this.dom.target=this.model.get("target")})),this.listen("create",function(e){this.model.get("href")&&(e.href=this.model.get("href"),this.model.get("target")&&(e.target=this.model.get("target")))})},{_baseClassName:"w-button",_template:'<{{_tag}} class="w-button"><span>{{{text}}}</span></{{_tag}}>',_events:{"@":"click","@/mouseover":function(){this.addClass(this.__hoverClass)},"@/mouseout":function(){this.removeClass(this.__hoverClass)}}},{click:function(){this.fire("click")}});return r}),define("module/cart/minicartview",["require","pro","component/button"],function(e){function i(){var e=this;this.listen("create",function(){this.listenDoms({"@":function(){e.fire("click")},"@/mouseover":function(){e.fire("mouseover")},"@/mouseout":function(){e.fire("mouseout")}})}),this.listen("mouseover",function(){clearTimeout(this.__layerTimer),this.__layerTimer=t.delay(function(){this.showLayer()},this,500)}),this.listen("mouseout",function(){clearTimeout(this.__layerTimer),this.__layerTimer=t.delay(function(){this.layer&&this.layer.hide()},this,500)}),this.listen("update",function(){this.layer&&this.layer.show()})}function s(e){var t=this.constructor;this.bubble?this.bubble.update({text:e}):this.bubble=(new t.Bubble({text:e})).render(this.find("@btn"))}function o(){this.bubble&&(this.bubble.destroy(),delete this.bubble)}function u(){this.layer?this.layer.show():(this.layer=this.createLayer(),this.layer.render(this))}function a(){var e=this;return new r.Layer({model:this.model,events:{"@/mouseover":function(n,r){var i=!1,s=r.relatedTarget||r.fromElement||r.toElement;i=n===s||t.contains(n,s),!i&&e.fire("mouseover")},"@/mouseout":function(n,r){var i=!1,s=r.relatedTarget||r.fromElement||r.toElement;i=n===s||t.contains(n,s),!i&&e.fire("mouseout")}},listeners:{show:function(){e.dom.style.zIndex=999,e.fire("expand",this)},hide:function(){e.dom.style.zIndex=""},create:function(){e.dom.style.zIndex=999,e.fire("expandcreate",this)},render:function(){e.fire("expand",this)},goclick:function(){e.fire("goclick")}}})}function f(){this.layer&&this.layer.update()}function l(e,t){this.layer&&(this.layer.doms.count.innerHTML=e||0,this.layer.doms.total.innerHTML=t||0)}var t=e("pro"),n=e("component/button"),r=t.View.extend(i,{_html:'<div class="w-miniCart"></div>',_events:{"@btn":"click","@btn/mouseover":"mouseover","@btn/mouseout":"mouseout"},Bubble:t.View.extend({_template:'<b class="w-miniCart-count"><i class="ico ico-arrow-white-solid ico-arrow-white-solid-l"></i>{{text}}</b>',_getData:function(e){return{text:e.text}}}),Layer:t.View.extend({_template:'<div class="w-layer w-miniCart-layer">							{{#empty}}								<div class="w-miniCart-empty">您的清单中还没有任何奖品</div>							{{/empty}}							{{^empty}}								<p class="w-miniCart-layer-title"><strong>最近加入的奖品</strong></p>								<div class="w-miniCart-list" data-pro="entry"></div>								<div class="w-miniCart-layer-footer">									<p><strong>共有<b data-pro="count">{{count}}</b>件奖品，金额总计：<em><span data-pro="total">{{total}}</span>夺宝币</em></strong></p>									<p><button data-pro="go" class="w-button w-button-main">查看清单并结算</button></p>								</div>							{{/empty}}						</div>',_entry:"@entry",_doms:{submit:"@submit",count:"@count",total:"@total"},_events:{"@go":"goclick"}}),Goods:t.View.extend({_template:'<div class="w-miniCart-item">							<div class="w-miniCart-item-pic"><img width="{{smallPic.width}}" height="{{smallPic.height}}" src="{{smallPic.url}}" onerror="this.src=\'http://mimg.127.net/p/yy/lib/img/products/s.png\'" alt="{{name}}" /></div>							<div class="w-miniCart-item-text">								<p><strong>(第{{period}}期) {{name}}</strong></p>								<p>									<em>{{num}}夺宝币 × {{regularBuy}}期</em>									<a class="w-miniCart-item-del" href="javascript:void(0);" data-pro="del">删除</a>								</p>							</div>						</div>',_events:{"@del":function(e,n){this.fire("delclick"),t.cancelBubble(n)}}})},{showBubble:s,hideBubble:o,showLayer:u,createLayer:a,update:f,renderTotal:l});return r}),define("component/msgbox",["require","pro","component/base","component/button"],function(e){var t=e("pro"),n=e("component/base"),r=e("component/button"),i=t.Component.Msgbox=n.extend(function(e){e=e||{},i.current&&i.current.destroy(),this.listen("ok",e.onokclick||e.onok),this.listen("cancel",e.oncancelclick||e.oncancel),this.listen("close",e.oncloseclick||e.onclose),i.current=this,"width"in e&&this.listen("create",function(t){t.style.width=e.width+"px"})},{_getData:function(e){var t=!!(e.okText||e.onokclick||e.onok||e.ok)&&e.ok!==!1,n=!!(e.cancelText||e.oncancelclick||e.oncancel||e.cancel)&&e.cancel!==!1;return{header:e.header||"",title:e.title||"",text:e.text||"",ok:t,cancel:n,footer:e.footer,__hasFooter:!!(e.footer||t||n)}},_template:'<div class="w-msgbox">						<a data-pro="close" href="javascript:void(0);" class="w-msgbox-close">×</a>						<div class="w-msgbox-hd" data-pro="header">{{header}}</div>						<div class="w-msgbox-bd" data-pro="entry">{{#title}}<h2 class="w-msgbox-title">{{{title}}}</h2>{{/title}}{{{text}}}</div>						{{#__hasFooter}}							<div data-pro="footer" class="w-msgbox-ft">{{{footer}}}</div>						{{/__hasFooter}}					</div>',_events:{"@ok":"okclick","@cancel":"cancelclick","@close":"closeclick"},_listeners:{create:function(){var e=this,t=this.__config;this.entry=this.find("@entry"),this.header=this.find("@header"),this.footer=this.find("@footer"),this.footer&&(this.model.get("ok")&&(new r({subclass:"main",text:t.okText||"确定",onclick:function(){e.fire("okclick")}})).render(this.footer),this.model.get("cancel")&&(new r({subclass:"aside",text:t.cancelText||"取消",onclick:function(){e.fire("cancelclick")}})).render(this.footer)),this.mask=(new n({html:'<div class="w-mask"><iframe style="position:absolute;top:0;left:0;z-index:-1;filter:Alpha(Opacity=0);width:100%;height:100%" scrolling="no" frameborder="0"></iframe></div>'})).render(document.body).join(this)},render:function(){var e=this;this.center(),this.__onresize=t.bind(function(){this.center()},this),t.addEvent(window,"resize",this.__onresize)},destroy:function(){t.removeEvent(window,"resize",this.__onresize),i.current=null},okclick:function(){this.fire("ok")!==!1&&this.destroy()},closeclick:function(){this.fire("cancel")!==!1&&this.fire("close")!==!1&&this.destroy()},cancelclick:function(){this.fire("cancel")!==!1&&this.destroy()}},show:function(e){(new this(e)).render(document.body)}},{center:function(){var e=this.dom,t=document.documentElement,n=e.offsetWidth,r=e.offsetHeight,i=t.clientWidth,s=t.clientHeight,o=t.scrollTop,u=t.scrollLeft;e.style.left=(i-n)/2+"px",e.style.top=(s-r)/2+"px";var a=this.mask;if(a&&a.dom.offsetHeight<s){var f=a.dom,l=t.scrollHeight;f.style.height=l+"px",e.style.top=e.offsetTop+t.scrollTop+"px"}else e.offsetTop<0?(e.style.position="absolute",e.style.top=t.scrollTop+document.body.scrollTop+"px"):e.offsetLeft+e.offsetWidth>i?(e.style.position="absolute",e.style.top=t.scrollTop+document.body.scrollTop+"px",e.style.left=t.scrollLeft+document.body.scrollLeft+"px"):e.style.position=""}});return i}),define("component/input",["require","pro","component/base"],function(e){var t=e("pro"),n=e("component/base"),r=t.Component.Input=n.extend(function(e){e=e||{},"onkeypress"in e&&this.listen("keypress",e.onkeypress),"onkeydown"in e&&this.listen("keydown",e.onkeydown),"onkeyup"in e&&this.listen("keyup",e.onkeyup),"onenter"in e&&this.listen("enter",e.onenter),"onchange"in e&&this.listen("change",e.onchange),this.listen("create",function(e){this.doms={input:this.find("@input")};var t=this.doms.input;this.model.get("placeholder")&&(this.placeholder=(new r.Placeholder({text:this.model.get("placeholder")})).join(this).render(this)),this.model.get("width")&&(t.style.width=this.model.get("width")+"px"),this.model.get("value")&&this.setValue(this.model.get("value")),this.model.get("maxlength")&&t.setAttribute("maxlength",this.model.get("maxlength"))}),this.listen("disable",function(){this.doms.input.disabled=!0}),this.listen("resume",function(){this.doms.input.disabled=!1})},{_getData:function(e){return{width:e.width,height:e.height,placeholder:e.placeholder,maxlength:e.maxlength||e.maxLength,value:e.value||"",type:e.type||"text"}},_baseClassName:"w-input",_template:'<div class="w-input"><input class="w-input-input" data-pro="input" type="{{type}}" /></div>',_events:{"@input/focus":"focus","@input/blur":"blur","@input/keypress":function(e,t){this.fire("keypress",t.keyCode,t),t.keyCode==13&&this.fire("enter",t)},"@input/keydown":function(e,t){this.fire("keydown",t.keyCode,t)},"@input/keyup":function(e,t){this.fire("keyup",t.keyCode,t)},"@input/change":function(e){this.fire("change",e.value)}},Tips:n.extend({_getData:function(e){return{text:e.text,error:e.error,success:e.success}},_template:'<div class="w-input-tips{{#error}} txt-err{{/error}}{{#success}} txt-suc{{/success}}">{{{text}}}</div>'}),Placeholder:n.extend(function(e){this.listen("create",function(){this.listen(this.getParent(),"change",function(){this.getParent().getValue()?this.hide():this.show()}),this.listen(this.getParent(),"focus",function(){this.hide()}),this.listen(this.getParent(),"blur",function(){this.getParent().getValue()||this.show()})})},{_getData:function(e){return{text:e.text}},_template:'<span class="w-input-placeholder">{{{text}}}</span>',_events:{"@":function(){this.getParent().focus()}}})},{select:function(){this.doms.input.select()},focus:function(){this.doms.input.focus(),this.fire("focus")},success:function(e){var t=this.constructor;this.addClass(t.getClassName("suc")),this.__success=!0,this.__error=!1,this.fire("success"),e&&this.showTips(e)},error:function(e){var t=this.constructor;this.addClass(t.getClassName("err")),this.__error=!0,this.__success=!1,this.fire("error"),e&&this.showTips(e)},normal:function(){var e=this.constructor;this.removeClass(e.getClassName("err")),this.removeClass(e.getClassName("suc")),this.__error=!1,this.__success=!1,this.fire("normal"),this.hideTips()},blur:function(){this.doms.input.blur(),this.fire("blur")},setValue:function(e){this.doms.input.value=e,this.fire("change",e)},getValue:function(){return this.doms.input.value},clear:function(){this.setValue("")},showTips:function(e,t){var n=t=="suc"||this.__success,i=t=="err"||this.__error,s={text:e,success:n,error:i};this.tips?this.tips.update(s):this.tips=(new r.Tips(s)).render(this.dom.parentNode)},hideTips:function(){this.tips&&(this.tips.destroy(),this.tips=null,delete this.tips)}});return r}),define("component/select",["require","pro","component/base"],function(e){var t=e("pro"),n=e("component/base"),r=t.Component.Select=n.extend(function(e){"onchange"in e&&this.listen("change",e.onchange)},{_getData:function(e){return{items:e.options||e.items}},_template:'<select class="pro-select">						{{#items}}						<option value="{{value}}">{{text}}</option>						{{/items}}					</select>',_events:{"@/change":function(e){this.fire("change",e.value)}}},{getValue:function(){return this.dom.value},getIndex:function(){return this.dom.selectedIndex},setIndex:function(e){return this.dom.selectedIndex=e},setValue:function(e){var t=this.model.get("items");for(var n=0,r=t.length;n<r;n++)if(t[n].value===e){this.setIndex(n);break}}});return r}),define("common/cookie",["require","jquery"],function(e){function r(){n._document=document}function i(e,r,i,s,o){var u=e,a=r,f=i,l=s||"/",c=o;if(!u)return;var h=new Date,p="";f&&(h.setTime(h.getTime()+f*24*60*60*1e3),p=";expires="+h.toGMTString()),n._document.cookie=encodeURIComponent(t.trim(u))+"="+encodeURIComponent(a)+p+(l?";path="+l:"")+(c?";domain="+c:"")}function s(e){var r=e,i="";if(!r)return i;var s=n._document.cookie;if(!t.trim(s))return i;var o="(^| |;)"+encodeURIComponent(t.trim(r))+"="+"([^;]*)"+"(;|$)",u=new RegExp(o),a=s.match(u);return a&&(i=decodeURIComponent(a[2])),i}function o(e,r,i){var s=e;if(!s)return;var o=r||"/",u=i,a=new Date;a.setTime(a.getTime()+ -1);var f=";expires="+a.toGMTString();n._document.cookie=encodeURIComponent(t.trim(s))+"="+f+(o?";path="+o:"")+(u?";domain="+u:"")}var t=e("jquery"),n={_document:null,_init:r,set:i,get:s,del:o};return n._init(),n}),define("common/location",["require","pro","jquery"],function(e){function i(e,t,n){function a(e,t){return e.indexOf("?"+t)>-1||e.indexOf("&"+t)>-1}t=t||window.location.href;var r=t.split("#"),i=r[0],s=i.indexOf("?")>-1?"&":"?";if(typeof e=="string"){var o=e.charAt(0);e=o==="?"||o==="&"?e.slice(1):e,i+=s+e}else for(var u in e)a(i,u)?n||(i=i.replace(new RegExp(u+"="+"[^&#]*"),u+"="+e[u])):(i+=s+u+"="+e[u],s="&");return r[0]=i,r.join("#")}function s(e,t){return this.getParameters(t)[e]}function o(e){e=e||window.location.href;var t=this._paramCache,r=e.replace(/(#.+)/g,"");if(t[r])return t[r];var i=n.trim(this._parse(e).query),s=i?i.split("&"):[],o,u={};if(s.length>0){for(var a=0,f=s.length;a<f;a++)o=/([^=]+)=([^=]*)/.exec(s[a]),o&&(u[o[1]]=o[2]);t[r]=u}return u}function u(e){var t=this._parse(e).hostname.split(".");return t.length<2?"":t.reverse().slice(0,2).reverse().join(".")}function a(e){var t=this._parse(e).hash;return t=!!t&&t.length>0?t.slice(1):"",t}function f(e){e=e||window.location.href;var t=document.createElement("a");return t.href=e,{href:t.href,host:t.host||window.location.host,port:"0"===t.port||""===t.port?window.location.port:t.port,hash:t.hash,hostname:t.hostname||window.location.hostname,pathname:t.pathname.charAt(0)!=="/"?"/"+t.pathname:t.pathname,protocol:!t.protocol||":"===t.protocol?location.protocol:t.protocol,search:t.search,query:t.search.slice(1)}}var t=e("pro"),n=e("jquery"),r=t.Base.extend({_paramCache:{},_parse:f,addParam:i,getParam:s,getDomain:u,getParameters:o,getHash:a});return r}),define("common/login",["require","jquery","pro","component/msgbox","component/input","component/select","common/cookie","common/location"],function(e){function f(e){var a=this,f=e||window.location.href;a.url=f;if(G.isLogin===1)return;var l=['<div class="m-login w-form">','<div class="w-form-item">','<div class="w-form-name">',"用户名:","</div>",'<div class="w-form-cont" id="loginForm_nameIpt">',"</div>","</div>",'<div class="w-form-item">','<div class="w-form-name">',"密&nbsp;&nbsp;&nbsp;码:","</div>",'<div class="w-form-cont" id="loginForm_passIpt">',"</div>","</div>","</div>",'<div data-pro="footer" class="w-msgbox-ft"><button class="w-button w-button-main" data-pro="ok"><span>登录</span></button><a href="http://reg.email.163.com/" target="_blank">我还没有网易邮箱</a></div>','<form action="https://reg.163.com/logins.jsp" method="post" id="loginForm" style="display:none;">','<input id="loginForm_username" type="hidden" name="username" value="">','<input id="loginForm_password" type="hidden" name="password" value="">','<input id="loginForm_product" type="hidden" name="product" value="mail163">','<input id="loginForm_url" type="hidden" name="url" value="">','<input id="loginForm_savelogin" type="hidden" name="savelogin" value="">',"</form>"].join("");r.show({className:"m-login",header:"请使用网易邮箱登录",text:l,ok:!1,oncreate:function(){var e=this,r=this.find("#loginForm_nameIpt"),o=(new i({attr:{tabindex:1}})).render(r).join(this);(new n.View({html:'<b class="at">@</b>'})).render(r);var u=(new s({className:"domain",attr:{tabindex:3},options:[{text:"163.com",value:"163.com"},{text:"126.com",value:"126.com"},{text:"yeah.net",value:"yeah.net"},{text:"vip.163.com",value:"vip.163.com"},{text:"vip.126.com",value:"vip.126.com"},{text:"188.com",value:"188.com"}]})).render(r).join(this),f=(new i({type:"password",attr:{tabindex:2}})).render(this.find("#loginForm_passIpt")).join(this);this.domain=u,this.pass=f,this.user=o,this.user.listen("blur",function(e,n){var r=this.getValue().split("@");this.setValue(t.trim(r[0]));var i=r[1];i&&(/^\s*1\s*6\s*3\s*(|\.|\.\s*c|\.\s*c\s*o|\.\s*c\s*o\s*m)\s*$/i.test(i)&&this.getParent().domain.setValue("163.com"),/^\s*1\s*2\s*6\s*(|\.|\.\s*c|\.\s*c\s*o|\.\s*c\s*o\s*m)\s*$/i.test(i)&&this.getParent().domain.setValue("126.com"),/^\s*y\s*e\s*a\s*h\s*(|\.|\.\s*n|\.\s*n\s*e|\.\s*n\s*e\s*t)\s*$/i.test(i)&&this.getParent().domain.setValue("yeah.net"),/^\s*v\s*i\s*p\s*\.\s*1\s*6\s*3\s*(|\.|\.\s*c|\.\s*c\s*o|\.\s*c\s*o\s*m)\s*$/i.test(i)&&this.getParent().domain.setValue("vip.163.com"),/^\s*v\s*i\s*p\s*\.\s*1\s*2\s*6\s*(|\.|\.\s*c|\.\s*c\s*o|\.\s*c\s*o\s*m)\s*$/i.test(i)&&this.getParent().domain.setValue("vip.126.com"),/^\s*1\s*8\s*8\s*(|\.|\.\s*c|\.\s*c\s*o|\.\s*c\s*o\s*m)\s*$/i.test(i)&&this.getParent().domain.setValue("188.com"))}),this.listenDoms({"@/keydown":function(t,n){n.keyCode==13&&a.submit.apply(e)}})},onafterrender:function(){this.user.focus();var e="",t=u.getParam("account");t?e=t:e=o.get("lastlogin");var n,r,i;e&&(i=e.split("@"),n=i[0],r=i[1],this.user.setValue(e),this.domain.setValue(r),this.pass.focus())},onok:a.submit})}function l(){var e=t.trim(this.user.getValue());this.user.setValue(e);var n=t.trim(this.pass.getValue());return this.pass.setValue(n),e==""?(this.user.showTips("用户名不能为空"),this.user.focus(),this.user.listen("keydown",function(){this.hideTips()})):n==""?(this.pass.showTips("密码不能为空"),this.pass.focus(),this.pass.listen("keydown",function(){this.hideTips()})):(o.set("lastlogin",e+"@"+this.domain.getValue(),30),a.login(e+"@"+this.domain.getValue(),n)),!1}function c(e,n){var r=this,i=r.url;if(!e||!n)return;return t("#loginForm_username").val(e),t("#loginForm_password").val(n),t("#loginForm_url").val(i),t("#loginForm").submit(),!1}var t=e("jquery"),n=e("pro"),r=e("component/msgbox"),i=e("component/input"),s=e("component/select"),o=e("common/cookie"),u=e("common/location"),a=function(){};return t.extend(a,{url:"",input:{},show:f,login:c,submit:l}),a}),define("common/dataaction",["require","pro","jquery","common/login"],function(e){function s(e){var n=this.constructor;e=e||{},this.__api={},this.__handlers={},t.mix(this.__api,n.api),t.mix(this.__handlers,n.handlers),"api"in e&&t.mix(this.__api,e.api),"handlers"in e&&t.mix(this.__handlers,e.handlers),"onsuccess"in e&&this.listen("success",e.onsuccess),"onerror"in e&&this.listen("error",e.onerror);if("listeners"in e){var r=e.listeners;for(var i in r)this.listen(i,r[i])}}function o(){var e=this.object=this.object||new this;return e.jsonp.apply(e,arguments)}function u(){var e=this.object=this.object||new this;return e.ajax.apply(e,arguments)}function a(e,t,n,r){var i=this,s=this.getApi(e,!0),o=s.url;t=t||{},t.t=(new Date).getTime();var u="DataAction_jsonp_callback_"+t.t;t.callback=u;var a=[];for(var f in t)a.push(f+"="+t[f]);var l="?"+a.join("&");window[u]=function(){n&&n.call(i),n=null,i=null,window[u]=null,delete window[u]};var c=document.createElement("script");c.src=o+l,c.onerror=function(){r&&r.call(i)},document.body.appendChild(c)}function f(e,t,i,s){function l(t){o.__handlers[e]&&o.__handlers[e].call(o,t),i&&i.call(o,t),o.fire("ajaxsuccess",e,t),o.fire("ajaxsuccess:"+e,t),t&&t.code!==undefined&&(t.code=t.code-0,o.fire(e,t.code,t.result),o.fire(e+":"+t.code,t.result),t.code===0?o.fire("success:"+e,t.result):t.code===-1?(r.show(),o.fire("error:"+e,t.code,t.result),o.fire("error:"+e+":"+t.code,t.result)):(o.fire("error:"+e,t.code,t.result),o.fire("error:"+e+":"+t.code,t.result)))}function c(t){s&&s.call(o,t),o.fire("ajaxerror",e,t),o.fire("ajaxerror:"+e,t)}var o=this,u=this.getApi(e,!0),a=u.type,f=u.url;return t=t||{},u.cache||(t.t="t"in t?t.t:(new Date).getTime()),n.ajax({url:f,data:t,type:a,dataType:"json",success:l,error:c}),this}function l(e,n,r,i){var s=this.getApi(e);e=s.url;for(var o in n)n[o]===undefined?delete n[o]:n[o]===null&&(n[o]="");r&&(window.__dataActionCallbacks=this.callbacks=this.callbacks||{},this.callbacks[r.name]=r.handler);var u="xpost-form",a="xpost-target",f=t.$(u),l=document.body,c=document.createElement("form");f&&f.parentNode.removeChild(f),c.id=u,c.action=e,c.target=i||a,c.method="POST",c.style.display="none",c.innerHTML="";for(var h in n){var p=document.createElement("input");p.type="hidden",p.name=h,p.value=n[h],c.appendChild(p)}if(!i){var d=t.$(a),v=null;d&&d.parentNode.removeChild(d);try{v=document.createElement("<iframe name="+a+">")}catch(m){v=document.createElement("iframe")}v.id=a,v.name=a,v.style.display="none",t.$(a)||l.appendChild(v)}l.appendChild(c),c.submit()}function c(e,t){var n=this.constructor,r=/^(post|get)\:/,i=/(:cache)$/,s=/^\//,o=/https?\:\/\//.test(e);o||(e=this.__api[e]||e);var u=r.test(e)?e.match(r)[1]:"get",a=i.test(e);return e=e.replace(r,""),e=e.replace(i,""),!o&&t&&n.isLocal&&(e=e.replace(/\.do$/,".mo")),s.test(e)&&(e=e.replace(s,"")),{url:(o?"":G.host+"/")+e,type:u,cache:a}}var t=e("pro"),n=e("jquery"),r=e("common/login"),i=t.Base.extend(s,{isLocal:window.location.port=="8081",api:{},jsonp:o,ajax:u},{jsonp:a,ajax:f,xpost:l,getApi:c});return i}),define("module/cart/cartaction",["require","jquery","pro","common/dataaction","common/login","common/cookie"],function(e){function u(e,t,n){this.ajax("query",{gid:e},t,n)}function a(e,t,n){if(G.isLogin){var r=s.get("cart");if(r){var i=0,o=r.split(","),u=o.length;for(var a=0,f=u;a<f;a++){var l=o[a].split(":");this.add(l[0],l[1],l[2],l[3],function(r){i++,i>=u&&(t&&t.call(this,r),s.del("cart"),this.get(e,t,n))},function(r){i++,i>=u&&(t&&t.call(this,r),s.del("cart"),this.get(e,t,n))})}}else this.ajax("get",e,function(e){switch(e.code){case 0:t&&t.call(this,e.result)}},n)}else{var o=[],r=s.get("cart"),c=[];if(!r){t&&t.call(this,[]);return}o=r.split(",");for(var a=0,f=o.length;a<f;a++){var l=o[a].split(":");c.push(l[0]),o[a]={id:l[0],gid:l[0],period:l[1],num:l[2]-0}}this.query(c.join(","),function(e){if(e.code==0){for(var n=0,r=o.length;n<r;n++){var i=o[n],s=e.result[n];i.name=s.gname,i.gpic=s.gpic}t&&t.call(this,o)}})}}function f(e,t,n,r,s){G.isLogin?this.xpost("buy",{gid:e,num:t||1,regularBuy:n||1,isFreeCoin:r,period:s},null,"_self"):i.show()}function l(e,t,n){this.ajax("batchAdd",{goods:e,token:s.get("OTOKEN")},function(e){e.code==0?t&&t.call(this,e.result):n&&n.call(this,e.code)},n)}function c(e,t,n,r,i,o){n=n||1,r=r||1;if(G.isLogin)this.ajax("add",{id:e,period:t,num:n,regularBuy:r,token:s.get("OTOKEN")},function(e){e.code==0?i&&i.call(this,e.result):o&&o.call(this,e.code)},o);else{var u=s.get("cart")||"",a=new RegExp("("+e+"):(\\d+):(\\d+)(?::(\\d+))?(?=,|$)");a.test(u)?u=u.replace(a,function(e,t,i,s){var o=s-0;return[t,i,o+n,r].join(":")}):u+=(u?",":"")+[e,t,n,r].join(":"),s.set("cart",u),this.get(null,function(e){i&&i.call(this,e)})}}function h(e,t,n){if(G.isLogin)this.ajax("del",{id:e},function(e){e.code==0&&t&&t.call(this,e.result)},n);else{var r=s.get("cart")||"",i=new RegExp(e+":\\d+:\\d+(?:\\,|$)");i.test(r)&&(r=r.replace(i,""),r=r.replace(/\,$/,""),s.set("cart",r),this.get(null,function(e){t&&t.call(this,e)}))}}function p(e,t,n,r,i){this.ajax("update",{id:e,num:t,regularBuy:n},function(e){switch(e.code-0){case 0:r&&r.call(this,e.result);break;default:i&&i.call(this,e.code)}},i)}function d(e,t,n){this.ajax("submit",{id:e,token:s.get("OTOKEN")},t,n)}function v(e){e?this.xpost("pay",e,null,"_self"):window.location.href=this.getApi("pay").url}function m(e){if(e.code==0){var t=e.result,n=[];for(var r=0,i=t.length;r<i;r++){var s=t[r];n.push({id:s.id,status:s.info.status,gid:s.info.gid,gpic:s.info.goods.gpic,name:s.info.goods.gname,num:s.num,tag:s.info.goods.tag,price:s.info.goods.price,period:s.info.period,totalTimes:s.info.goods.price,existingTimes:s.info.existingTimes,regularBuy:s.regularBuy,regularBuyMax:s.info.goods.regularBuyMax})}e.result=n}}var t=e("jquery"),n=e("pro"),r=e("common/dataaction"),i=e("common/login"),s=e("common/cookie"),o=r.extend({api:{get:"cart/get.do",query:"goods/query.do",add:"post:cart/add.do",batchAdd:"post:cart/batchAdd.do",del:"post:cart/del.do",update:"post:cart/update.do",submit:"post:cart/submit.do",buy:"post:cart/index.do",pay:"pay/order.do"},handlers:{get:m,add:m,del:m}},{query:u,get:a,buy:f,add:c,batchAdd:l,del:h,update:p,submit:d,pay:v});return o}),define("component/tipslayer",["require","jquery","pro","component/base"],function(e){var t=e("jquery"),n=e("pro"),r=e("component/base"),i=n.Component.TipsLayer=r.extend(function(e){e=e||{},i.current&&i.current.destroy(),i.current=this,this.listen("render",function(n){var r=t(e.ref);n.style.width=e.width?e.width+"px":"auto",n.style.top=r.offset().top-t(n).outerHeight()-10+"px",n.style.left=r.offset().left+r.outerWidth()/2-6+"px"})},{_getData:function(e){return{title:e.title||"",text:e.text||""}},_template:'<div class="w-tipsLayer">						<i class="ico ico-arrow ico-arrow-tipArr"></i>						{{&text}}					</div>',_listeners:{create:function(){t(this.dom).css({opacity:0})},render:function(){t(this.dom).animate({opacity:1},200)}},show:function(e){if(i.current)return;return(new this(e)).render(document.body),i.current}},{destroy:function(){var e=this;t(this.dom).animate({opacity:0},200,function(){r.prototype.destroy.call(e),i.current=null})}});return i}),define("common/utils",["require","pro","component/tipslayer","component/msgbox"],function(e){function s(e){return e=e.replace(/</gi,"&lt;"),e=e.replace(/>/gi,"&gt;"),e=e.replace(/\"/gi,"&quot;"),e=e.replace(/\'/gi,"&apos;"),e}function o(e){var t=0;for(var n=0;n<e.length;n++)e.charCodeAt(n)<0||e.charCodeAt(n)>255?t+=2:t+=1;return t}function u(e,t){var n=e+"";if(n.length<t)for(var r=0,i=t-n.length;r<i;r++)n="0"+n;return n}function a(e){var t=new RegExp("[%--`~!@#$^&*()=|{}':;',\\[\\].<>/?~！@#￥……&*（）——|{}【】‘；：”“'。，、？]"),n="";for(var r=0;r<e.length;r++)n+=e.substr(r,1).replace(t,"");return n}function f(e,t){var n=this,r=0;return t==0?e:(r=e%t,n.getDivisor(t,r))}function l(e,t){var n=t||160,r,i=e||{},s=i.avatarPrefix;s||(s="http://mimg.127.net/p/yy/lib/img/avatar/"),n<40?r=40:n<90?r=90:r=160;var o='<img width="'+n+'" height="'+n+'" onerror="this.src=\'http://mimg.127.net/p/yy/lib/img/avatar/'+r+'.jpeg\'" src="'+s+r+'.jpeg" />';return o}function c(e,t){var n="";switch(t){case"s":n=e[0];break;case"m":n=e[1];break;case"l":n=e[2]}return n}function h(e,t,n){var r=t?this.format(e,4):e,i=t?this.format(t||0,6):"",s="/detail/";return n&&(s="/history/"),i==""?G.host+s+r+".html":G.host+s+r.substring(0,2)+"-"+r.substring(2,4)+"-"+i.substring(0,2)+"-"+i.substring(2,4)+"-"+i.substring(4,6)+".html"}function p(e,t,n,r){return G.host+"/list/"+e+"-"+t+"-"+n+"-"+r+".html"}function d(e){return G.host+"/user/index.do?cid="+e}function v(e,t){return e+t+".jpg"}function m(e,t){return G.host+"/user/shareAdd.do?gid="+e+"&period="+t}function g(e,t,n){return G.host+"/user/shareDetail.do?cid="+e+"&gid="+t+"&period="+n}function y(e){return e?G.host+"/pay/recharge.do?id="+e:""}function b(){function t(){var e=$Win.width(),t=1200,n=20,r=45;e<t+r*2+n*2?$BackTop.css({right:"20px"}):$BackTop.css({right:($Win.width()-1200)/2-r-20+"px"})}var e=this;if(e._hasShowBackTop)return;e._hasShowBackTop=!0,$Win=$(window),$Body=$(document.body),$Body.append('<a href="javascript:void(0);" title="返回顶部" style="display:none;" id="lkBackToTop" class="w-back-top"><b class="ico ico-top"></b></a>'),$BackTop=$("#lkBackToTop"),t(),$Win.on("resize",function(){t()}),$Win.on("scroll",function(){var e=$Win.scrollTop();e>100?$BackTop.show():$BackTop.hide()}),$BackTop.on("click",function(){$Win.scrollTop(0)})}function w(e){var t=null;e?t=e.find(".ico-questionMark"):t=$(".ico-questionMark"),t.each(function(){var e=$(this),t=e.attr("data-func"),r="",i=null;switch(t){case"remainder":r='<b class="txt-red">余数：</b>指整数除法中，被除数未被除尽部分。<br/>“例如27除以6，商数为4，余数为3”';break;case"regularBuy":r='<b class="txt-red">Tip：</b>由于该用户参与多期此奖品夺宝，因此由系统自动为其分配相应数量的夺宝号码。';break;default:r="我不说你也懂的吧~"}e.unbind().hover(function(){i=n.show({ref:e[0],width:e.attr("data-width"),text:r})},function(){i&&i.destroy()})})}function E(){var e=$(".link-helper");e.each(function(){var e=$(this),t=e.attr("data-func");sTitle="",sTips="";switch(t){case"regularBuy":sTitle="如何一次参与多期夺宝？",sTips=['<ul style="padding-left:1.5em;text-indent:-1.5em">','<li style="margin-top:5px;">1、当您选择参与该奖品多期夺宝活动后，系统将默认在新一期活动开始时为您自动参与，参与人次每期相同；</li>','<li style="margin-top:5px;">2、系统为您自动参与的夺宝记录IP与您支付夺宝币时的使用的IP一致，参与时间为在新一期夺宝活动开始后，系统为您自动参与该奖品的时间；</li>','<li style="margin-top:5px;">3、系统将按照参与该奖品多期夺宝活动先后顺序自动参与新一期夺宝活动（假设A用户在您之前选择了参与多期夺宝，那么系统将会优先A用户的参与权）；</li>','<li style="margin-top:5px;">4、如果新一期夺宝活动剩余人次小于您希望参与的人次，系统将不会为您参与该期活动，并优先参与该奖品的下一期活动，因此可能会出现非连续期数的参与记录；</li>','<li style="margin-top:5px;">5、当您选择参与该奖品多期夺宝活动时，需一次性扣除 参与人次 x 参与多期期数 的夺宝币（如参与10期A奖品夺宝活动10人次，将需要使用100夺宝币）；</li>','<li style="margin-top:5px;">6、如该奖品夺宝活动因故取消（比如商家停产等），系统将会把您剩余的夺宝币退还。</li>',"</ul>"].join("")}e.on("click",function(){r.show({className:"w-msgbox-helper",title:sTitle,text:sTips,ok:!0})})})}var t=e("pro"),n=e("component/tipslayer"),r=e("component/msgbox"),i=t.Base.extend({encodeHTML:s,stringLen:o,format:u,stripScript:a,getDivisor:f,avatar:l,getGoodsImg:c,getGoodsUrl:h,getGoodsListPage:p,getUserPage:d,getShareDetailPage:g,getSharePic:v,getShareAdd:m,getRecharge:y,initBackTop:b,showQMark:w,showLinkHelper:E,_hasShowBackTop:!1});return i}),define("module/cart/cartmodel",["require","pro","common/utils"],function(e){var t=e("pro"),n=e("common/utils"),r=t.Model.extend({_data:{id:"",status:0,gid:0,name:"未命名奖品",num:0,price:1,period:0,totalTimes:0,existingTimes:0,regularBuy:1,regularBuyMax:1,gpic:[],smallPic:function(){return{width:64,height:48,url:n.getGoodsImg(this.gpic,"s")}},middlePic:function(){return{width:200,height:150,url:n.getGoodsImg(this.gpic,"m")}},url:function(){return n.getGoodsUrl(this.gid,this.period)},remainTimes:function(){return this.totalTimes-this.existingTimes}}});return r}),define("module/cart/minicart",["require","pro","module/cart/minicartview","module/cart/cartaction","module/cart/cartmodel","common/login","component/msgbox"],function(e){function a(e){var t=this.constructor;e=e||{},this.list=new t.List,this.action=e.action||new t.Action,this.model=new t.Model,this.view=new t.View({model:this.model}),this.listenEvents()}function f(){var e=this,t=this.view;this.listenOnceTo(this.view,"render",function(){this.refresh()}),this.listen("refresh",function(e){this.list.set(e)}),this.listen(this.list,"change",function(e){this.model.set("count",this.list.getCount()),this.model.set("total",this.getTotal())}),this.listen(this.model,"change:count",function(e){this.view.showBubble(e)}),this.listen(this.list,"replace",function(){this.list.getCount()&&this.list.each(function(e){e.view&&e.view.destroy(),delete e.view}),this.view.update()}),this.listen(this.view,"goclick",function(){this.go()}),this.listen(this.view,"expandcreate",function(t){this.list.each(function(r){var i=this;r.view=(new n.Goods({model:r,listeners:{delclick:function(){e.del(r.get("gid"))}}})).renderTo(t),r.listen("afterchange",function(){r.view.update()})})})}function l(){var e=this;this.action.get(null,function(t){e.fire("refresh",t)})}function c(e){return this.view.render(e),this}function h(e,t){var n=this,r=(this.list.find({gid:e})||[])[0];r&&this.action.del(r.get("id"),function(e){n.list.set(e),t&&t.call(n,oCartModel),n.fire("remove",r),n.fire("refresh",e)})}function p(e,t,n){var r=this;this.action.batchAdd(e,function(){t?t():r.go()},n)}function d(e,n,r){var s=this,u=null;typeof e=="string"?u=new i({gid:e}):t.is("model",e)?u=e:u=new i(e);var a=u.get("gid"),f=u.get("period"),l=u.get("existingTimes"),c=u.get("num"),h=u.get("regularBuy");this.action.add(a,f,c,h,function(e){s.list.set(e),n&&n.call(s,u),s.fire("add",u),s.fire("refresh",e)},function(e){switch(e+""){case"-250":o.show({text:'<p style="text-align:center"><i class="ico ico-err-m"></i> <b>添加失败，该奖品剩余人次不足！</b></p>',ok:!0});break;case"-251":o.show({text:'<p style="text-align:center"><i class="ico ico-err-m"></i> <b>您选择的奖品当期活动已满员，<br />　　是否立即参加最新一期夺宝？</b></p>',onok:function(){u.set("period",""),s.add(u,n,r)},oncancel:function(){window.location.reload()}});break;default:o.show({text:'<p style="text-align:center"><i class="ico ico-err-m"></i> <b>添加至清单失败，请重试</b></p>',ok:!0})}r&&r.call(s,sCode)})}function v(e){return this.view.dom=e,this.view.render(),this}function m(){var e=G.host+"/cart/index.do";G.isLogin?window.location.href=e:s.show(e)}function g(e,n){var r;t.is("model",e)?r=e:r=new i(e),r.get("isFreeCoin")?this.action.buy(r.get("gid"),r.get("num"),r.get("regularBuy"),!0,r.get("period")):this.add(r,function(){this.go()},n)}function y(){var e=0;return this.list.each(function(t){e+=t.get("num")*t.get("regularBuy")}),e}var t=e("pro"),n=e("module/cart/minicartview"),r=e("module/cart/cartaction"),i=e("module/cart/cartmodel"),s=e("common/login"),o=e("component/msgbox"),u=t.Base.extend(a,{Action:r,View:n,List:t.List.extend({Model:i}),Model:t.Model.extend({_data:{empty:function(){return this.count===0}}})},{__layerHidden:!0,listenEvents:f,refresh:l,render:c,del:h,add:d,batchAdd:p,bind:v,go:m,buy:g,getTotal:y});return u}),define("common/specialsupport",["require","pro","common/dataaction"],function(e){function r(){return this.__specials.length}function i(r,i){var s=this;n.ajax("/kpimission/actregu.do:cache",null,function(n){function v(){a+f>=u&&i&&i.call(s)}try{var o={},u=n.result.list.length,a=0,f=0;for(var l=0;l<u;l++){var c=n.result.list[l],h=c.relateAct,p=s.__specialMap[h];p&&p[r]?e([p.base+p[r]],t.bind(function(e,t,n){a++;try{this.__specials.push(new n({context:this,rule:t,tag:e}))}catch(r){}v()},s,h,c),function(){f++,v()}):f++}v()}catch(d){i&&i.call(s)}},function(){i&&i.call(s)})}function s(e){if(this.__specials)for(var t=0,n=this.__specials.length;t<n;t++){var r=this.__specials[t];try{r&&e.call(this,r)}catch(i){}}}var t=e("pro"),n=e("common/dataaction");return{getSpecialCount:r,eachSpecial:s,getSpecial:i,__specials:[],__specialMap:{pay11:{base:"hd/pay11/",cart:"cart"},charge11:{base:"hd/charge11/",recharge:"recharge"},chargediscountgq:{base:"hd/chargediscountgq/",recharge:"recharge",index:"index",global:"global"},chargediscount:{base:"hd/chargediscount/",recharge:"recharge",global:"global"},gamepcard:{base:"hd/gamepcard/",cart:"cart",order:"order",result:"result",detail:"detail"}}}}),define("common/countdown",["require","pro"],function(e){function r(e){"now"in e&&(this.__fix=this._now()-e.now),"interval"in e&&(this.interval=e.interval),"expires"in e&&(this.expires=e.expires),"finish"in e?this.finish=e.finish:this.finish=this._now().getTime()+this.expires;if("listeners"in e){var t=e.listeners;for(var n in t)this.listen(n,t[n])}}function i(){return new Date((new Date).getTime()-this.__fix)}function s(e,n){this.__timer=setInterval(t.bind(function(){var t=this._now();this.expires=this.finish-this._now().getTime();var r=new Date(this.finish),i=r.getTime()-t.getTime(),s=parseInt(i/1e3/60/60%60),o=parseInt(i/1e3/60%60),u=parseInt(i/1e3%60),a=parseInt(i%1e3),f=parseInt(a/10),l={h:s<10?"0"+s:s+"",m:o<10?"0"+o:o+"",s:u<10?"0"+u:u+"",ms:f<10?"0"+f:f+""};e&&e.call(this,l),this.fire("run",l),s<=0&&o<=0&&u<=0&&a<=0&&(n&&n.call(this),this.fire("run",{h:"00",m:"00",s:"00",ms:"00"}),this.fire("finish"),this.stop())},this),this.interval),this.fire("start")}function o(){clearInterval(this.__timer),this.fire("stop")}var t=e("pro"),n=t.Base.extend(r,{},{interval:1e3,expires:6e4,start:s,stop:o,_now:i,__timer:null,__fix:0});return n}),define("common/header",["require","pro","common/login","common/dataaction","common/utils","component/msgbox","component/input","module/cart/minicart","common/cookie","common/location","common/specialsupport"],function(e){function h(e){var t=this;t.initToolbar(),t.renderSearchBar(),t.renderCatlog(),t.updateJoinNum(),t.setCookie(),t.fixNav(),$("#whatIsThis").bind("click",function(){return t.showPopIntro(),!1}),(!e||!e.bDelayCart)&&t.renderMiniCart(),t.showPromot()}function p(){var e=this;e.getQuery("needLogin")==1&&n.show(),e.login(),e.logout(),e.addFavorite(),e.renderMyDuobao(),e.joinYXGroup()}function d(e,t){var n=window.location.search.substr(1),r=n.match(new RegExp("(^|&)"+e+"=([^&]*)(&|$)"));return t?r==null?null:r[2]:r==null?null:unescape(r[2])}function v(e){var t=this;r.ajax("/user/global.do",null,function(n){if(n.code-0==0){var r=n.result,i="";$.extend(G,r),r.isLogin==1?(i=['<a class="m-toolbar-nickname" href="/user/index.do" title="'+(G.mobileMail&&G.mobileMail!=""?G.mobileMail:G.uid)+'">'+G.nickname+"</a>",' <a class="m-toolbar-logout-btn" href="javascript:void(0)">[ 退出 ]</a>'].join(""),$(".m-toolbar-login").append(i),t.logout()):(i=['<a class="m-toolbar-login-btn" href="javascript:void(0)">请登录</a>','<a href="http://reg.email.163.com/" target="_blank">免费注册</a>'].join(""),$(".m-toolbar-login").append(i),t.login()),e&&e()}})}function m(){var e=$(".m-toolbar-login-btn");e.bind("click",function(){return n.show(),!1})}function g(){var e=$(".m-toolbar-logout-btn");e.bind("click",function(){return a.del("OST"),a.del("OSA"),window.location.href="http://reg.163.com/Logout.jsp?username="+G.uid.split("@")[0]+"&url="+encodeURIComponent(G.host),!1})}function y(){if($(".w-msgbox").length>0)return;s.show({className:"w-msgbox-intro",text:'<h3>什么是一元夺宝？</h3><a class="ruleLink" href="'+G.host+'/helpcenter/1-1.html" target="_blank" title="了解规则">了解规则</a>',ok:!1})}function b(){var e=$(".m-toolbar-myDuobao"),t=$(".m-toolbar-myDuobao-btn"),n=$(".m-toolbar-myDuobao-menu");e.hover(function(){t.find(".ico").removeClass("ico-arrow-gray-s-down").addClass("ico-arrow-gray-s-up"),e.addClass("m-toolbar-hover"),n.show()},function(){t.find(".ico").removeClass("ico-arrow-gray-s-up").addClass("ico-arrow-gray-s-down"),e.removeClass("m-toolbar-hover"),n.hide()})}function w(){$(".m-toolbar-yxGroup").bind("click",function(){s.show({className:"m-popup-joinYXGroup",text:'<img style="margin:0 auto" width="405" height="280" src="'+G.url+'lib/img/common/code_yxgroup.jpg" />',ok:!1})})}function E(){var e=$(".m-nav");if(e.length==0)return;if(window.PAGENAME&&window.PAGENAME=="index")return;var t=e.offset().top;$(window).scroll(function(){if($(document).height()-$(document).scrollTop()-$(window).height()<e.outerHeight()+10)return;var n=$(document).scrollTop();n>t?e.addClass("fixed"):e.removeClass("fixed")})}function S(){var e=$("#addSiteFavorite"),t=G.host,n="一元夺宝 - 网易";e.bind("click",function(){if(document.all)window.external.AddFavorite(t,n);else if(window.sidebar&&window.sidebar.addPanel)window.sidebar.addPanel(n,t,"");else{if(window.opera&&window.print)return!1;s.show({text:'<p><i class="ico ico-alert-m" style="margin-right:10px;"></i><b>抱歉，您的浏览器不支持该操作！</b></p><p style="text-indent:42px;">PC 可尝试按<b>Ctrl + D</b>，Mac 请按<b>Cmd + D</b>。</p>',ok:!0})}})}function x(){var e=this,t=$(".m-header").find(".w-miniCart").get(0);return e._miniCart=(new u).bind(t),e._miniCart}function T(){function l(){var t=i.stripScript(e._searchInput.getValue()).replace(/\s{2,}/," ");return $.trim(t)==""?(s.show({text:'<p><i class="ico ico-alert-m"></i> 请先输入您要查找的关键字，多个关键词请用空格隔开~</p>',ok:!1}),!1):(u.val(t),n[0].submit(),!1)}var e=this,t=$(".w-search"),n=t.find(".w-search-form"),r=t.find(".w-search-btn"),u=t.find(".w-search-keyword"),a=t.find(".w-search-recKeyWrap"),f=t.find(".w-search-recKey");e._searchInput=(new o({className:"w-search-input",placeholder:"请输入要搜索的奖品",maxlength:50,onenter:function(e){l()},onchange:function(){this.getValue()==""?a.show():a.hide()},onkeyup:function(){this.getValue()==""?a.show():a.hide()}})).render(n[0]),r.bind("click",l),a.hover(function(){r.addClass("w-search-btn-hover")},function(){r.removeClass("w-search-btn-hover")})}function N(){function u(t){s=!0,t?r.removeClass("ico-arrow-white-up").addClass("ico-arrow-white-down"):r.removeClass("ico-arrow-white-down").addClass("ico-arrow-white-up"),n.animate({height:t?0:"353px"},i,function(){t?e.removeClass("open"):e.addClass("open"),s=!1})}if(window.PAGENAME&&window.PAGENAME=="index")return;var e=$(".m-catlog"),t=$(".m-catlog-hd").find("a"),n=e.find(".m-catlog-wrap"),r=e.find(".m-catlog-hd").find(".ico-arrow"),i=300,s=!1,o=0;e.hover(function(){clearTimeout(o),o=setTimeout(function(){if(s)return!1;u(!1)},100)},function(){clearTimeout(o),o=setTimeout(function(){e.hasClass("open")&&u(!0)},300)}),$("body").not(e).bind("click",function(){e.hasClass("open")&&u(!0)})}function C(){function s(){r.ajax("/common/joinNum.do",null,o)}function o(e){if(e.code-0==0){var t=e.result;u(t.num)}}function u(e){var r=e+"",i=r.split(""),s=t.find(".m-joinNum-wrap").length;for(var o=0,u=s-i.length;o<u;o++)i.unshift("0");for(var o=0,u=s;o<u;o++){var a=t.find("span").eq(o);if(a.find("b.on").index()!=i[o]||a.position().top!=0-a.find("b.on").position().top){var f=a.find("b").eq(i[o]),l=f.position().top;a.find("b").removeClass("on"),f.addClass("on"),a.animate({top:0-l},n,function(){})}}}var e=this,t=$("#joinNumber"),n=500,i=1e4;if(t.length==0)return;s(),e._joinNumberInterval=setInterval(s,i)}function k(){r.ajax("/user/getNewestReward.do",null,function(e){var n=e.result.prize,r=e.result.hasBonus,i={prize:['<div class="w-msgbox-getPrize-wrap">','<p class="period">第{{period}}期</p>','<p class="name f-txtabb" title="{{gname}}">{{gname}}</p>','<a class="btn" href="{{url}}">',"{{#isVirtual}}立即查看{{/isVirtual}}{{^isVirtual}}立即确认收货地址{{/isVirtual}}","</a>","</div>"].join(""),bonus:'<a class="btn" href="{{url}}" title="马上去看看"></a>'};if(n.gid)n.url=G.host+"/user/win.do",n.isVirtual=n.property&&n.property==1?!0:!1,s.show({className:"w-msgbox-special w-msgbox-getPrize",text:t.template(i.prize,n),ok:!1});else if(r){var o={url:G.host+"/user/bonus.do"+(e.result.bonusStatus==0?"":"?status="+e.result.bonusStatus)};s.show({className:"w-msgbox-special w-msgbox-getBonus",text:t.template(i.bonus,o),ok:!1})}})}function L(){var e=f.getParam("from"),t=a.get("from");!G.isLogin&&e!==undefined&&t==""&&a.set("from",e,1),G.isLogin&&t!=""&&a.del("from")}function A(){l.getSpecial("global",function(){l.eachSpecial(function(e){e.init()}),setTimeout(function(){$(".m-header-slogan-link").length==0&&($("#whatIsThis").show(),$("#whatIsThis").find("img").css("opacity",0).animate({opacity:1},500))},500)})}var t=e("pro"),n=e("common/login"),r=e("common/dataaction"),i=e("common/utils"),s=e("component/msgbox"),o=e("component/input"),u=e("module/cart/minicart"),a=e("common/cookie"),f=e("common/location"),l=e("common/specialsupport"),c={init:h,initToolbar:p,getQuery:d,getGlobal:v,login:m,logout:g,showPopIntro:y,addFavorite:S,renderMyDuobao:b,joinYXGroup:w,fixNav:E,renderMiniCart:x,renderSearchBar:T,renderCatlog:N,updateJoinNum:C,getNewestReward:k,setCookie:L,showPromot:A,_miniCart:{},_searchInput:{},_joinNumberInterval:0};return c}),define("common/json2",[],function(){return typeof JSON!="object"&&(JSON={}),function(){function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a&&typeof a=="object"&&typeof a.toJSON=="function"&&(a=a.toJSON(e)),typeof rep=="function"&&(a=rep.call(t,e,a));switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";gap+=indent,u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||"null";return i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]",gap=o,i}if(rep&&typeof rep=="object"){s=rep.length;for(n=0;n<s;n+=1)typeof rep[n]=="string"&&(r=rep[n],i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i))}else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i));return i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}",gap=o,i}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx,escapable,gap,indent,meta,rep;typeof JSON.stringify!="function"&&(escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(e,t,n){var r;gap="",indent="";if(typeof n=="number")for(r=0;r<n;r+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),JSON}),define("common/log",["require","jquery"],function(e){function n(){var e=location.host,n=!1;$.each(t._white,function(t,r){if(r.test(e))return n=!0,!1}),t._debug=n,typeof console!="undefined"&&(t._console=console)}function r(e,n){if(!t._debug)return;var r=e,i=n||"";if(typeof r=="undefined")return;r+="";if(!r)return;t._console&&t._console.log(i+": "+r)}function i(e){if(!t._debug)return;var e=e;if(typeof e=="undefined")return;t._console&&(e.stack?t._console.error(e.stack):e.message?t._console.error(e.message):t._console.error(e))}$=e("jquery");var t={_console:null,_debug:!1,_white:[new RegExp("^xparkdev4.mail.163.com$"),new RegExp("^1.gztest.mail.163.com$"),new RegExp("^my.1.mail.163.com(|:\\d+)$")],_init:n,log:r,error:i};return t._init(),t}),define("common/lazyload",["require","jquery","pro","common/log"],function(e){function s(e){var n=this,r=e||{},i=window;n.__win=i,n.__doc=i.document;var s=r.container;if(typeof s=="undefined")n.__dom=t(n.__doc.body);else if(s instanceof t)n.__dom=s;else{if(typeof s!="string")return;n.__dom=t("#"+s)}var o=r.dataName||"data-src";n.__dataName=o;var u=r.time-0||200;n.__time=u,r.minWidth&&(n.__minWidth=r.minWidth),r.minHeight&&(n.__minHeight=r.minHeight),n.__domList=n.__dom.find(n.__tag+"["+n.__dataName+"]"),n.__domList.each(function(e,t){var r=t.style,i=r.cssText||"";t.setAttribute("data-cssText",i),r.cssText+=";min-height:"+n.__minHeight+"px;"+"min-width:"+n.__minWidth+"px;"}),n.__initListen(),window.setTimeout(t.proxy(n.__show,n),200),n.fire("afterinit")}function o(){var e=this,n=function(e){return function(){window.setTimeout(function(){e.__show.apply(e)},e.__time)}}(e);e.__handler=n,t(e.__win).on("scroll",e.__handler),t(e.__win).on("resize",e.__handler)}function u(){var e=this;t(e.__win).off("scroll",e.__handler),t(e.__win).off("resize",e.__handler),e.__domList=e.__dom=e.__win=e.__doc=null,n.Base.prototype.destroy.call(e),e=null}function a(){var e=this,t=e.__doc;if(!t)return;var n=parseInt(t.documentElement.clientHeight),r=e.__domList,i=r.length,s,o,u,a,f,l;if(!i)return!1;for(var c=0;c<i;c++){s=r[c];if(s){o=s.getAttribute(e.__dataName),u=s.getBoundingClientRect(),a=parseInt(u.top),f=parseInt(u.bottom);if(o&&a*f<0||a>=0&&f>0&&a<n)s.onload=function(){var e=this.className;this.className=e.replace(/\s*fn-lazyLoading/,""),this.style.cssText=this.getAttribute("data-cssText"),this.removeAttribute("data-cssText")},l=s.className,/\s*fn-lazyLoading\s*/.test(l)||(s.className+=l?" fn-lazyLoading":"fn-lazyLoading"),s.setAttribute("src",o),s.removeAttribute(e.__dataName),r[c]=null}}}var t=e("jquery"),n=e("pro"),r=e("common/log"),i=n.Base.extend(s,{},{__time:null,__dom:null,__dataName:null,__tag:"img",__domList:null,__initListen:o,__win:null,__doc:null,__show:a,__handler:null,__minWidth:40,__minHeight:40,destroy:u});return i}),define("component/checkbox",["require","pro","component/base"],function(e){var t=e("pro"),n=e("component/base"),r=t.Component.Checkbox=n.extend(function(e){e=e||{},this.checked=!!e.checked,this.model.set({checked:this.checked,text:e.text}),this.listen("disable",function(){this.doms.input.disabled=!0}),this.listen("resume",function(){this.doms.input.disabled=!1}),this.listen("change",function(e){this.model.set("checked",e),this.checked=e}),"onchange"in e&&this.listen("change",e.onchange),this.checked&&this.listen("create",function(){this.check()})},{_baseClassName:"w-checkbox",_template:'<label class="w-checkbox"><input type="checkbox" data-pro="input"{{#checked}} checked{{/checked}} />{{#text}} <span data-pro="text" >{{{text}}}</span>{{/text}}</label>',_doms:{input:"@input",text:"@text"},_events:{"@input":function(e){this.check(e.checked)}}},{check:function(e,t){return e=e===!1?!1:!0,this.doms.input.checked=e,this.checked!==e&&!t&&this.fire("change",e),this.checked=e,this.checked},getChecked:function(){return this.doms.input.checked}});return r}),define("component/numberinput",["require","pro","component/base"],function(e){var t=e("pro"),n=e("component/base"),r=t.Component.NumberInput=n.extend(function(e){var e=this.__config;this.listen("disable",function(){this.doms.input.setAttribute("disabled","true")}),this.listen("resume",function(){this.doms.input.removeAttribute("disabled")}),this.listen(this.model,"change:value",function(e){this.fire("change",e)}),this.listen("change",e.onchange),this.listen("afterchange",e.onafterchange)},{_template:'<div class="w-number">                        <input class="w-number-input" data-pro="input" value="{{value}}"/>                        <a class="w-number-btn w-number-btn-plus" data-pro="plus" href="javascript:void(0);">+</a>                        <a class="w-number-btn w-number-btn-minus" data-pro="minus" href="javascript:void(0);">-</a>                    </div>',_getData:function(e){return{min:"min"in e?e.min:-Infinity,max:"max"in e?e.max:Infinity,value:e.value||0,width:e.width}},_doms:{input:"@input"},_events:{"@plus/mousedown":function(){this.fire("plusclick"),this.__timer=t.delay(function(){this.__timer=setInterval(t.bind(function(){this.fire("plusclick")},this),100)},this,400)},"@minus/mousedown":function(){this.fire("minusclick"),this.__timer=t.delay(function(){this.__timer=setInterval(t.bind(function(){this.fire("minusclick")},this),100)},this,400)},"@plus/mouseup":function(){this.__timer&&clearTimeout(this.__timer),this.fire("afterplusclick")},"@minus/mouseup":function(){this.__timer&&clearTimeout(this.__timer),this.fire("afterminusclick")},"@plus/mouseout":function(){this.__timer&&(clearTimeout(this.__timer),this.fire("afterplusclick"))},"@minus/mouseout":function(){this.__timer&&(clearTimeout(this.__timer),this.fire("afterminusclick"))},"@input/change":function(e){this.setValue(e.value),this.fire("afterchange",this.getValue())}},_listeners:{plusclick:function(){this.plus()},minusclick:function(){this.minus()},afterplusclick:function(){this.fire("afterchange",this.getValue())},afterminusclick:function(){this.fire("afterchange",this.getValue())}},_baseClassName:"w-number"},{setValue:function(e){e-=0;var t=this.model.get("max"),n=this.model.get("min");if(typeof e=="number"&&!isNaN(e)&&isFinite(e))return e>t?e=t:e<n&&(e=n),this.doms.input.value=e,this.model.set("value",e),e;if(isNaN(e)||!isFinite(e))return this.doms.input.value=this.model.get("value"),this.getValue()},getValue:function(){return this.doms.input.value-0},plus:function(){var e=this.getValue();this.setValue(++e),this.fire("plus",e)},minus:function(){var e=this.getValue();this.setValue(--e),this.fire("minus",e)}});return r}),define("component/pager",["require","pro","component/base","component/button"],function(e){var t=e("pro"),n=e("component/base"),r=e("component/button"),i=t.Component.Pager=n.extend(function(e){var n=this.Class;this.list=new t.List,"onchange"in e&&this.listen("change",e.onchange),this.listen("create",function(){var e=this.__config,r=this.model.get("current"),i=this.model.get("href"),s=this.model.get("total"),o=this.model.get("next"),u=this.model.get("prev"),a=null,f=(new n.Button({text:u,className:"w-pager-prev",subclass:"aside",num:r-1,disabled:r-1<=0,href:i})).join(this),l=(new n.Button({text:o,className:"w-pager-next",subclass:"aside",num:r+1,disabled:r>=s,href:i})).join(this);f.render(this);if(!e.simple)if(s<=10)for(var c=1,h=s;c<=h;c++){var p=r==c;(new n.Button({text:c,className:p?"w-pager-cur":"",disabled:p,subclass:"aside",num:c,href:i})).join(this).render(this)}else{for(var c=1,h=5;c<=h;c++){var p=r==c,d=(new n.Button({text:c,className:p?"w-pager-cur":"",disabled:p,subclass:"aside",num:c,href:i})).join(this).render(this);p&&(a=d)}var v=(new t.View({html:"<i></i>"})).render(this),m=(new n.Button({text:s,className:r==s?"w-pager-cur":"",disabled:r==s,subclass:"aside",num:s,href:i})).join(this).render(this);s===r&&(a=m);var g=(new n.Button({text:"...",className:"w-pager-ellipsis",subclass:"aside",disabled:!0})).renderBy(v);a||(a=(new n.Button({text:r,className:"w-pager-cur",disabled:!0,subclass:"aside",num:r,href:i})).join(this),r<s-1?(a.renderBefore(g),r>6&&(new n.Button({text:"...",className:"w-pager-ellipsis",subclass:"aside",disabled:!0})).renderBefore(a)):a.renderAfter(g))}l.render(this)})},{_baseClassName:"w-pager",_template:'<div class="w-pager"></div>',_useBuffer:!0,_getData:function(e){return{total:e.total||1,current:e.current||1,href:e.href,prev:e.prev||"&lt;&lt; 上一页",next:e.next||"下一页 &gt;&gt;"}},Button:r.extend(function(e){this.model.set({href:t.template(e.href,{num:e.num}),num:e.num}),this.listen("click",function(){var e=this.getParent();if(e){var t=this.model.get("num");e.fire("change",t)}})})});return i}),define("component/table",["require","pro","component/base"],function(e){var t=e("pro"),n=e("component/base"),r=t.Component.Table=n.extend(function(e){var t=this.constructor;this.listen("create",function(e){var n=this.doms.body.getElementsByTagName("tr");for(var r=0,i=n.length;r<i;r++){var s=n[r],o=(new t.Row({dom:s})).join(this),u=s.getElementsByTagName("td");for(var a=0,f=u.length;a<f;a++)var l=u[a],c=(new t.Cell({dom:l})).join(o)}}),this.model.set({caption:e.caption,head:e.head,body:e.body,footer:e.footer,repeat:!!e.repeat,_rows:function(){return(e.body||[]).length},_headCols:function(){var t=e.head||[],n=0;for(var r=0,i=t.length;r<i;r++){var s=t[r].colspan;typeof s!="undefined"&&(n+=s-1),t[r].hidden&&(n-=1)}return t.length+n},_bodyCols:function(){var t=(e.body||[])[0]||[],n=0;for(var r=0,i=t.length;r<i;r++){var s=t[r].colspan;typeof s!="undefined"&&(n+=s-1),t[r].hidden&&(n-=1)}return t.length+n},_cols:function(){return Math.max(this._headCols(),this._bodyCols())},_colIndex:function(){var e=[];for(var t=0,n=this._cols();t<n;t++)e.push(t);return e}})},{_baseClassName:"w-table",_template:'<table class="w-table">						{{#caption}}<caption>{{{caption}}}</caption>{{/caption}}						<colgroup>							{{#_colIndex}}<col class="w-table-col{{.}}"/>{{/_colIndex}}						</colgroup>						<thead>							<tr>{{#head}}<th style="{{#align}}text-align:{{align}};{{/align}}{{#hidden}}display:none;{{/hidden}}"{{#className}} class="{{className}}"{{/className}}{{#colspan}} colspan="{{colspan}}"{{/colspan}}>{{{text}}}</th>{{/head}}</tr>						</thead>						<tfoot>							{{#repeat}}<tr>{{#head}}<th{{#className}} class="{{className}}"{{/className}}>{{{text}}}</th>{{/head}}</tr>{{/repeat}}							{{#footer}}<tr><td colspan="{{_cols}}">{{{footer}}}</td></tr>{{/footer}}						</tfoot>						<tbody>							{{#body}}								<tr>									{{#.}}										<td style="{{#align}}text-align:{{align}};{{/align}}{{#hidden}}display:none;{{/hidden}}"{{#className}} class="{{className}}"{{/className}}{{#colspan}} colspan="{{colspan}}"{{/colspan}}>{{{text}}}</td>									{{/.}}								</tr>							{{/body}}						</tbody>						</table>',_doms:{head:"thead",foot:"tfoot",body:"tbody"},Row:t.View.extend({Model:t.Model}),Cell:t.View.extend({Model:t.Model})},{addRow:function(e){var t=this.constructor,n=this.doms.body.insertRow(-1),r=(new t.Row({dom:n})).join(this);for(var i=0,s=e.length;i<s;i++){var o=n.insertCell(-1),u=(new t.Cell({dom:o})).join(r),a=e[i];o.innerHTML=typeof a!="object"?a:a.text}this.fire("addrow",n)},removeRow:function(e){var t=this.getChild(e);if(t)t.destroy(),this.fire("removerow",t);else{var n=this.doms.body.deleteRow(e);this.fire("removerow",n)}}});return r}),define("component/tabs",["require","pro","component/base"],function(e){var t=e("pro"),n=e("component/base"),r=t.Component.Tabs=n.extend(function(e){this.itemList=new t.List(e.items),this.listen("beforecreate",function(){this.useBuffer=!0}),this.listen("render",function(n){var i=this,s=this.doms={tab:this.find("@tab"),panel:this.find("@panel")};this.itemList.each(function(n,o){var u=n.get(),a;t.is("dom",u.tab)?a=(new r.Tab({dom:u.tab})).join(i).render():a=(new r.Tab({text:u.tab})).join(i).render(s.tab),t.is("dom",u.panel)?a.panel=(new r.Panel({dom:u.panel})).render().hide():a.panel=(new r.Panel({text:u.panel})).render(s.panel).hide(),a.listen("destroy",function(){this.panel.destroy(),this.panel=null,delete this.panel}),a.listen("click",function(){i.switchTo(this)}),u.onselect&&a.listen("select",u.onselect),u.onunselect&&a.listen("unselect",u.onunselect),u.disabled&&a.disable(),u.selected&&(e.selected=o)}),this.switchTo(e.selected||0)})},{_baseClassName:"w-tabs",_html:'<div class="w-tabs"><div class="w-tabs-tab" data-pro="tab"></div><div class="w-tabs-panel" data-pro="panel"></div></div>',Tab:n.extend({_template:'<div class="w-tabs-tab-item">{{{text}}}</div>',_events:{"@":"click"},_getData:function(e){return{text:e.text}}},{select:function(){this.addClass("w-tabs-tab-item-selected"),this.panel.show(),this.fire("select")},unselect:function(){this.removeClass("w-tabs-tab-item-selected"),this.panel.hide(),this.fire("unselect")}}),Panel:n.extend({_template:'<div class="w-tabs-panel-item">{{{text}}}</div>',_getData:function(e){return{text:e.text}}})},{getPanel:function(e){return(this.getChild(e)||{}).panel},getTab:function(e){return this.getChild(e)},switchTo:function(e){this.each(function(t,n){e===t||e===n?(t.select(),this.fire("switch",n,t)):t.unselect()})}});return r}),define("component/textarea",["require","pro","component/input"],function(e){var t=e("pro"),n=e("component/input"),r=t.Component.Textarea=n.extend({_template:'<div class="pro-textarea"><textarea class="pro-textarea-input" data-pro="input">{{value}}</textarea></div>'});return r}),define("hd/common/base",["require","pro"],function(e){function n(e){this.tag=e.tag,this.context=e.context,this.rule=e.rule}function r(e){return this.matchByTag(e)||this.matchById(e)}function i(e){var t=new RegExp("(?:^|,)"+this.tag+"(?=,|$)");return t.test(e.get("tag"))}function s(e){var t=new RegExp("(?:^|,)"+e.get("gid")+"(?=,|$)"),n=this.rule.relateDictid.join(",");return t.test(n)}function o(e,t){var n=this,r=0;return e.each(function(e){if(n.match(e)){var i=e.get("num"),s=t||e.get("checked"),o=t||e.get("status")===1,u=t||i<=e.get("remainTimes");s&&o&&u&&(r+=i)}}),r}var t=e("pro");return t.Base.extend(n,null,{tag:"",rule:null,context:null,getCount:o,match:r,matchByTag:i,matchById:s})}),define("component/fixedlayer",["require","jquery","pro","component/base","component/button"],function(e){var t=e("jquery"),n=e("pro"),r=e("component/base"),i=e("component/button"),s=n.Component.FixedLayer=r.extend(function(e){e=e||{},s.current&&s.current.destroy(),s.current=this},{_getData:function(e){var t=!!(e.okText||e.onokclick||e.onok||e.ok)&&e.ok!==!1;return{classname:e.classname||"",title:e.title||"",text:e.text||"",promot:e.promot||"",ok:t,footer:e.footer}},_template:'<div class="w-fixedLayer {{classname}}">						<div class="w-fixedLayer-hd">							<a data-pro="close" href="javascript:void(0);" class="w-fixedLayer-close">×</a>						</div>						<div class="w-fixedLayer-bd f-breakword">							{{#title}}<p class="w-fixedLayer-tt">{{&title}}</p>{{/title}}							{{#text}}{{&text}}{{/text}}							{{#promot}}{{&promot}}{{/promot}}							{{#ok}}								<div data-pro="btn" class="w-fixedLayer-btn">{{{footer}}}</div>							{{/ok}}						</div>						<div class="w-fixedLayer-ft"></div>					</div>',_events:{"@ok":"okclick","@close":"closeclick"},_listeners:{create:function(){var e=this,t=this.__config;this.btn=this.find("@btn"),this.model.get("ok")&&(new i({subclass:"main",text:t.okText||"确定",onclick:function(){e.fire("okclick")}})).render(this.btn)},afterrender:function(){var e=this.__config,n=this.dom;this._height=t(n).height(),t(n).css({height:0}),e.pos=e.pos||"right",e.pos=="bottom"?t(n).css({bottom:e.bottom||"0px"}):e.pos=="left"?t(n).css({left:e.left||"0px",bottom:e.bottom||"0px"}):e.pos=="right"&&t(n).css({right:e.right||"0px",bottom:e.bottom||"0px"}),navigator.userAgent.indexOf("MSIE 6.0")>0&&t(window).on("scroll",function(){t(n).css({bottom:"auto",top:t(window).height()+t(window).scrollTop()-t(n).height()-e.bottom+"px"})}),t(n).animate({height:this._height+"px"},500),this.listen("ok",e.onokclick||e.onok),this.listen("close",e.oncloseclick||e.onclose)},okclick:function(){this.fire("ok")!==!1&&this.destroy()},closeclick:function(){this.fire("close")!==!1&&this.destroy()}},show:function(e){return(new this(e)).render(document.body),s.current}},{destroy:function(){var e=this;t(this.dom).animate({height:0},300,function(){r.prototype.destroy.call(e),s.current=null})}});return s}),define("hd/common/global",["require","jquery","pro","hd/common/base","component/fixedlayer"],function(e){function s(e){var t=this;this.page=e||"",t.setConfig(),t.getConfig()}function o(){}function u(){var e=this;for(var t in e.config){e.config[t].page=e.config[t].page||"";if(this.page==e.config[t].page)switch(t){case"logoBanner":e.renderLogoBanner(e.config[t]);break;case"bottomFloat":e.renderBottomFloat(e.config[t])}}}function a(e){var n=t(".m-header-slogan");if(t(".m-header-slogan-link").length>0)return;n.append('<a class="m-header-slogan-link" href="'+e.link+'" target="_blank"><img src="'+e.img+'" /></a>'),t(".m-header-slogan-link").find("img").css("opacity",0).animate({opacity:1},500)}function f(e){if(this._fixedLayer)return;this._fixedLayer=i.show({pos:"bottom",bottom:0,className:"w-fixedLayer-bottom w-fixedLayer-"+this.tag,text:'<a href="'+e.link+'" target="_blank"><img height="'+e.imgHeight+'" src="'+e.img+'" /></a>'})}var t=e("jquery"),n=e("pro"),r=e("hd/common/base"),i=e("component/fixedlayer");return r.extend(null,{init:s,setConfig:o,getConfig:u,renderLogoBanner:a,renderBottomFloat:f,config:null,_fixedLayer:null})});